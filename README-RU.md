# Tg-Bot Membership Gate
<img src="docs/logo.png" alt="Logo" width="600"/>

–¢–µ–ª–µ–≥—Ä–∞–º‚Äë–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–æ–º –≤ –∑–∞–∫—Ä—ã—Ç—ã–µ —á–∞—Ç—ã/–∫–∞–Ω–∞–ª—ã –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–º—É ID.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ —à–∞–±–ª–æ–Ω—É —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –∏ –∫–Ω–æ–ø–∫–æ–π ¬´–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø¬ª.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ ID –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –æ –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö. –ü–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∞–¥–º–∏–Ω –≤–∏–¥–∏—Ç –Ω–∞–±–æ—Ä
  –∫–Ω–æ–ø–æ–∫: –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å (–Ω–∞ —Ä–∞–∑–Ω—ã–µ —Å—Ä–æ–∫–∏), –æ—Ç–∫–ª–æ–Ω–∏—Ç—å, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–∞–ª–æ–≤/—á–∞—Ç–æ–≤. –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è,
  –∞ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ ‚Äì —É–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —ç—Ç–∏—Ö —á–∞—Ç–æ–≤.
- –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ —Å–ª–µ–¥–∏—Ç –∑–∞ –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º –¥–æ—Å—Ç—É–ø–∞ –∏ –∑–∞–±–ª–∞–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç
  –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –¢–∞–π–º–∞—É—Ç—ã –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è —Ç–∞–∫–∂–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ–π.
- –î–≤–∞ –±—ç–∫–µ–Ω–¥–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏ PostgreSQL. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `.env`.
- –ù–∞–±–æ—Ä –∞–¥–º–∏–Ω‚Äë–∫–æ–º–∞–Ω–¥: `/ban`, `/unban`, `/kick`, `/remove`, `/export_users`, `/user`.
- –í—ã–±–æ—Ä —è–∑—ã–∫–∞ –∫–æ–º–∞–Ω–¥–æ–π `/language` –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ Jinja2‚Äë—à–∞–±–ª–æ–Ω—ã (`templates/`).

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
   ```bash
   pip install -r requirements.txt
   ```

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)**
   - `BOT_TOKEN` ‚Äì —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç `@BotFather`.
   - `ROOT_ADMIN_ID` ‚Äì Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
   - `DB_BACKEND` ‚Äì `sqlite` –∏–ª–∏ `postgres`.
   - `SQLITE_DB_PATH` ‚Äì –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã (–¥–ª—è SQLite).
   - `PG_HOST` ‚Äì —Ö–æ—Å—Ç PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `127.0.0.1`).
   - `PG_PORT` ‚Äì –ø–æ—Ä—Ç PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `5432`).
   - `PG_DB` ‚Äì –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
   - `PG_USER` ‚Äì –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
   - `PG_PASSWORD` ‚Äì –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
   - `PG_SSLMODE` ‚Äì —Ä–µ–∂–∏–º SSL (`disable`, `require` –∏ —Ç.–¥.).
   - `ACCESS_CHATS` ‚Äì ID —á–∞—Ç–æ–≤/–∫–∞–Ω–∞–ª–æ–≤, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –ø—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –¥–æ—Å—Ç—É–ø–∞.
   - `JOIN_INVITE_LABEL_PREFIX` ‚Äì –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –∑–∞—è–≤–æ—á–Ω—ã—Ö —Å—Å—ã–ª–æ–∫.
   - `LOG_LEVEL` ‚Äì —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `INFO`).
   - `DB_LOG_QUERIES` ‚Äì –ø—Ä–∏ `true` –≤—ã–≤–æ–¥–∏—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã –≤ –ª–æ–≥.

   –ü—Ä–∏–º–µ—Ä `.env` –¥–ª—è SQLite:
   ```env
   BOT_TOKEN=123456:ABCDEF
   ROOT_ADMIN_ID=123456789
   ACCESS_CHATS=-1001111111,-1002222222
   DB_BACKEND=sqlite
   SQLITE_DB_PATH=./db.sqlite3
   ```

   –ü—Ä–∏–º–µ—Ä `.env` –¥–ª—è PostgreSQL:
   ```env
   BOT_TOKEN=123456:ABCDEF
   ROOT_ADMIN_ID=123456789
   ACCESS_CHATS=-1001111111,-1002222222
   DB_BACKEND=postgres
   PG_HOST=localhost
   PG_PORT=5432
   PG_DB=tg_gate
   PG_USER=gate_user
   PG_PASSWORD=secret
   PG_SSLMODE=disable
   ```

   –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–æ–∑–¥–∞–π—Ç–µ –≤ PostgreSQL –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–∑—É:
   ```sql
   CREATE USER gate_user WITH PASSWORD 'secret';
   CREATE DATABASE tg_gate OWNER gate_user;
   ```

3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config/`)**
   –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–æ—Ç–∞ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ —Ç—Ä–∏ YAML‚Äë—Ñ–∞–π–ª–∞:

   **`ui_config.yaml` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —à–∞–±–ª–æ–Ω—ã**
   - `start` ‚Äì –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è: —Ñ–∞–π–ª —à–∞–±–ª–æ–Ω–∞, —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏,
     —Ñ–ª–∞–≥ `enabled_image` –∏ –Ω–∞–±–æ—Ä –∫–∞—Ä—Ç–∏–Ω–æ–∫ –ø–æ —è–∑—ã–∫–∞–º.
  - `messages` ‚Äì —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ–±—ã—Ç–∏–π –∏–º–µ–Ω–∏ —à–∞–±–ª–æ–Ω–∞: `ask_id`, `waiting`,
    `banned`, `not_found`, `granted`, `denied`, `warning`, `expired`,
    `admin_request`, `renewal_warning`, `grace_warning`,
    `renewal_requested_admin`, `links_unavailable`, `session_timeout`.
   - `admin_interface` ‚Äì –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞. –®–∞–±–ª–æ–Ω
     `approve_template` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `{period}`.
  - `language_prompt` ‚Äì —à–∞–±–ª–æ–Ω –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –¥–ª—è —Å–º–µ–Ω—ã —è–∑—ã–∫–∞ —á–µ—Ä–µ–∑ `/language`.
  - `start_language_prompt` ‚Äì —à–∞–±–ª–æ–Ω –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ –Ω–∞ `/start`.
  - `ask_id_prompt` ‚Äì –∑–∞–ø—Ä–æ—Å ID —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–æ–π.
  - `invalid_id_prompt` ‚Äì —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º ID —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–æ–π.
  - `post_join` ‚Äì —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è –≤ —á–∞—Ç: —à–∞–±–ª–æ–Ω, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è
    –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∏ —Ñ–ª–∞–≥ `enabled`.

   –ü—Ä–∏–º–µ—Ä `ui_config.yaml`:
   ```yaml
   start:
     template: start_user.txt
    action_button_text:
      en: "Get access"
      ru: "–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø"
     enabled_image: true
     image:
       en: { path: assets/en/start.jpg }
       ru: { path: assets/ru/start.jpg }

   messages:
     ask_id: ask_id.txt
     waiting: id_waiting.txt
     banned: id_banned.txt
     not_found: id_not_found.txt
     granted: access_granted.txt
     denied: access_denied.txt
     session_timeout: session_timeout.txt

  admin_interface:
    approve_template:
      en: "Approve for {period}"
      ru: "–†–∞–∑—Ä–µ—à–∏—Ç—å –Ω–∞ {period}"
    decline_text:
      en: "Decline"
      ru: "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
    ban_text:
      en: "Ban"
      ru: "–ó–∞–±–∞–Ω–∏—Ç—å"
    unban_text:
      en: "Unban"
      ru: "–†–∞–∑–±–∞–Ω–∏—Ç—å"
    kick_text:
      en: "Kick"
      ru: "–ö–∏–∫–Ω—É—Ç—å"
    remove_text:
      en: "Remove"
      ru: "–£–¥–∞–ª–∏—Ç—å"

   language_prompt:
     enabled_image: false
     template: language_prompt.txt

   start_language_prompt:
     enabled_image: false
     template: start_language_prompt.txt

   ask_id_prompt:
     enabled_image: false
     template: ask_id.txt

   invalid_id_prompt:
     enabled_image: false
     template: id_invalid.txt

   post_join:
     enabled: true
     enabled_image: true
     template: post_join.txt
     image:
       en: { path: assets/en/final.jpg }
       ru: { path: assets/ru/final.jpg }
   ```

   **`membership.yaml` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞**
   - `id.pattern` ‚Äì —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–≤–µ–¥—ë–Ω–Ω–æ–≥–æ ID.
   - `admin.approve_durations` ‚Äì —Å–ø–∏—Å–æ–∫ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤—ã–¥–∞—á–∏ –¥–æ—Å—Ç—É–ø–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
     (0 ‚Äî –±–µ—Å—Å—Ä–æ—á–Ω–æ). –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫–∏ `decline` –∏ `ban`.
   - `expiration.check_interval` –∏ `warn_before_sec` ‚Äì –ø–µ—Ä–∏–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏
     –∑–∞–±–ª–∞–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –¥–æ—Å—Ç—É–ø–∞.
   - `session_timeout.seconds` ‚Äì –≤—Ä–µ–º—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–±—Ä–æ—Å–∞ –¥–∏–∞–ª–æ–≥–∞;
     `send_message` –≤–∫–ª—é—á–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ —Å–±—Ä–æ—Å–µ.
   - `renewal` ‚Äì –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞: –≤—Ä–µ–º—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è,
     –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ¬´grace period¬ª –∏ —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤ `user_plans` (id/label/
     duration_sec).

   –ü—Ä–∏–º–µ—Ä `membership.yaml`:
   ```yaml
   id:
     pattern: "^[A-Z0-9]{4,10}$"

   admin:
     approve_durations:
       - 0        # –±–µ—Å—Å—Ä–æ—á–Ω–æ
       - 2592000 # 30 –¥–Ω–µ–π
       - 15552000 # 180 –¥–Ω–µ–π
     enable_decline: true
     enable_ban: true

   expiration:
     check_interval: 60
     warn_before_sec: 86400

   session_timeout:
     seconds: 900
     send_message: true

   renewal:
     warn_before_sec: 86400
     grace_after_expiry_sec: 86400
     user_plans:
       - id: trial_3d
         label: "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥"
         duration_sec: 259200
       - id: month_30
         label: "–ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ 30 –¥–Ω–µ–π"
         duration_sec: 2592000
       - id: lifetime
         label: "–ö—É–ø–∏—Ç—å –±–µ—Å—Å—Ä–æ—á–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É"
         duration_sec: 0
   ```

   **`i18n.yaml` ‚Äî —è–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
   - `i18n.enabled_start_prompt` ‚Äì –µ—Å–ª–∏ `true`, –±–æ—Ç —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ —è–∑—ã–∫–µ –ø–æ
     —É–º–æ–ª—á–∞–Ω–∏—é –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å —è–∑—ã–∫ –∫–æ–º–∞–Ω–¥–æ–π `/language`.
   - `i18n.default_lang` –∏ `supported_langs` ‚Äì —è–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —Å–ø–∏—Å–æ–∫
     –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤.
   - `i18n_buttons` ‚Äì –ø–æ–¥–ø–∏—Å–∏ –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ (`language_choices`) –∏ fallback-–∏–º—è `default_username`.

   –ü—Ä–∏–º–µ—Ä `i18n.yaml`:
   ```yaml
   i18n:
     enabled_start_prompt: true
     default_lang: en
     supported_langs: [en, ru]

   i18n_buttons:
     en:
       default_username: "Friend"
       choose_language_title: "Choose your language"
       language_choices:
         en: "English"
         ru: "–†—É—Å—Å–∫–∏–π"
     ru:
       default_username: "–î—Ä—É–≥"
       choose_language_title: "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫"
       language_choices:
         en: "English"
         ru: "–†—É—Å—Å–∫–∏–π"
   ```

4. **–ó–∞–ø—É—Å–∫**

   ```bash
   python telegram_bot.py
   ```

   –ï—Å—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
   - `setup.sh` / `setup.bat` ‚Äî —Å–æ–∑–¥–∞—é—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑);
   - `start.sh` / `start.bat` ‚Äî –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –±–æ—Ç–∞.

## üåê Localized images

 - –°–ª–æ–∂–∏—Ç–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ —è–∑—ã–∫–∞–º: `assets/<lang>/start.jpg`, `assets/<lang>/post_join.jpg` –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, `assets/<lang>/language_prompt.jpg` –∏ `assets/<lang>/start_language_prompt.jpg`.
 - –í `config/ui_config.yaml` —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç–∏ –∏–ª–∏ `file_id` –¥–ª—è —Å–µ–∫—Ü–∏–π `start`,
   `language_prompt`, `start_language_prompt` –∏ `post_join`.
 - –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É –∫–∞—Ä—Ç–∏–Ω–æ–∫ —á–µ—Ä–µ–∑ `enabled_image` (`start` –∏
   `post_join` –≤–∫–ª—é—á–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, `language_prompt` –∏ `start_language_prompt` ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω—ã).
- –ë–æ—Ç –∫–µ—à–∏—Ä—É–µ—Ç `file_id` –≤ —Ç–∞–±–ª–∏—Ü–µ `media_cache` –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ.
  –ü—Ä–∏ –∑–∞–º–µ–Ω–µ —Ñ–∞–π–ª–∞ —Ö–µ—à (`sha256`) –º–µ–Ω—è–µ—Ç—Å—è ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –∏
  –∫–µ—à –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç.
- –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å—å –ø—Ä–µ–≤—ã—à–∞–µ—Ç 1024 —Å–∏–º–≤–æ–ª–∞, —Ñ–æ—Ç–æ –ø—Ä–∏–¥—ë—Ç –±–µ–∑ –ø–æ–¥–ø–∏—Å–∏, –∞ —Ç–µ–∫—Å—Ç ‚Äî
  –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–º–∞–Ω–¥—É `/start`.
2. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫–Ω–æ–ø–∫—É ¬´–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø¬ª.
3. –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–≤–æ–π ID.
4. –ï—Å–ª–∏ ID –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω –≤ –ë–î ‚Äì –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–∫—Ä—ã—Ç—ã–µ —á–∞—Ç—ã.
5. –ï—Å–ª–∏ ID –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω ‚Äì –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
   —Å inline‚Äë–∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è.
6. –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è. –ü—Ä–∏ –æ—Ç–∫–∞–∑–µ/–±–∞–Ω–µ ‚Äì —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
7. –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –∏ —É–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   –∏–∑ —á–∞—Ç–æ–≤, –∫–æ–≥–¥–∞ —Å—Ä–æ–∫ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è.

## üí¨ –ö–æ–º–∞–Ω–¥—ã

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ**

- `/start` ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –∫–Ω–æ–ø–∫—É –¥–æ—Å—Ç—É–ø–∞.
- `/help` ‚Äî —Å–ø—Ä–∞–≤–∫–∞.
- `/language` ‚Äî –≤—ã–±—Ä–∞—Ç—å —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∏–µ**

- `/ban <KEY>` ‚Äî –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–∞–Ω–∞–ª–æ–≤.
- `/unban <KEY>` ‚Äî —Å–Ω—è—Ç—å –±–∞–Ω.
- `/kick <KEY>` ‚Äî —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ –∏ —Å–±—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –≤ –ë–î.
- `/remove <KEY>` ‚Äî —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å –∏–∑ –ë–î.
- `/export_users [all|confirmed|unconfirmed|banned]` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ CSV.
- `/user <KEY>` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.

`<KEY>` –º–æ–∂–µ—Ç –±—ã—Ç—å `membership_id`, —á–∏—Å–ª–æ–≤—ã–º `telegram_id` –∏–ª–∏ `@username`.

## üß™ –¢–µ—Å—Ç—ã

```bash
pytest
```

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –¥—ã–º–æ–≤–æ–π —Ç–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏,
—Å–≤—è–∑–∞–Ω–Ω–æ–π —Å –±–µ—Å—Å—Ä–æ—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–æ–π –∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –æ—Ç–ø–∏—Å–∫–∏/–±–∞–Ω–∞.
–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Å—Ä–æ–∫ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∞—Å—å.

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

- `modules/` ‚Äì –∫–æ–¥ –±–æ—Ç–∞ (—Ä–æ—É—Ç–µ—Ä, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, –ë–î, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏).
- `templates/` ‚Äì —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π.
- `schema/` ‚Äì SQL‚Äë—Å—Ö–µ–º—ã –¥–ª—è SQLite –∏ PostgreSQL.
- `config/` ‚Äì YAML‚Äë–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –ø—Ä–∞–≤–∏–ª –¥–æ—Å—Ç—É–ø–∞.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.

